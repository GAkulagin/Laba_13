# Laba_13
1.     Создать иерархию классов (см. лаб. 10). Для каждого класса реализовать конструктор без параметров, с параметрами, свойства для доступа к полям объектов, метод для автоматического формирования объектов. Перегрузить метод ToString() для формирования строки со значениями всех полей класса.

2.     Создать класс MyCollection как производный класс от класса Сollection<MyClass>.

3.     Класс Сollection<MyClass> взять из лабораторной работы №12. В классе должны быть реализованы в классе методы для  заполнения коллекции (элементы коллекции формируются автоматически), добавления элементов коллекции, удаления элементов коллекции, сортировки элементов коллекции по заданному полю,  очистки коллекции, реализован итератор для доступа к элементам коллекции, реализовано свойство Length (только для чтения), содержащее текущее количество элементов коллекции.

4.     Определить класс MyNewCollection производный от класса MyCollection, который с помощью событий извещает об изменениях в коллекции. Коллекция изменяется:

·        при удалении/добавлении элементов

·       при изменении одной из входящих в коллекцию ссылок, например, когда одной из ссылок присваивается новое значение.

В этом случае в соответствующих методах или свойствах класса бросаются события. 

5.      В новую версию класса MyNewCollection добавить

·       открытое автореализуемое свойство типа string с названием коллекции;

·       метод bool Remove (int j) для удаления элемента с номером j ; если в списке нет элемента с номером j, метод возвращает значение false;

·       индексатор (с методами get и set) с целочисленным индексом для доступа к элементу с заданным номером.

6.      Для событий, извещающих об изменениях в коллекции, определяется свой делегат CollectionHandler с сигнатурой:

void CollectionHandler (object source, CollectionHandlerEventArgs args);

7.     Для передачи информации о событии определить класс CollectionHandlerEventArgs, производный от класса System.EventArgs, который содержит

·       открытое автореализуемое свойство типа string с названием коллекции, в которой произошло событие;

·       открытое автореализуемое свойство типа string с информацией о типе изменений в коллекции;

·       открытое автореализуемое свойство для ссылки на объект, с которым связаны изменения;

·       конструкторы для инициализации класса;

·       перегруженную версию метода string ToString() для формирования строки с информацией обо всех полях класса.

8.     В класс MyNewCollection добавить два события типа CollectionHandler.

·        CollectionCountChanged, которое происходит при добавлении нового элемента в коллекцию или при удалении элемента из коллекции; через объект CollectionHandlerEventArgs cобытие передает имя коллекции, строку с информацией о том, что в коллекцию был добавлен новый элемент или из нее был удален элемент, ссылку на добавленный или удаленный элемент;

·        CollectionReferenceChanged, которое происходит, когда одной из ссылок, входящих в коллекцию, присваивается новое значение; через объект CollectionHandlerEventArgs событие передает имя коллекции, строку с информацией о том, что был заменен элемент в коллекции, и ссылку на новый элемент.

9.     Событие CollectionCountChanged бросают следующие методы класса MyNewCollection

·       AddDefaults();

·       Add (object[] ) ;

·       Remove (int index).

10.  Событие CollectionReferenceChanged бросает метод set индексатора, определенного в классе MyNewCollection.

 

11.  Информация об изменениях коллекции записывается в класс Journal, который хранит информацию в списке объектов типа JournalEntry. Каждый объект типа JournalEntry содержит информацию об отдельном изменении, которое произошло в коллекции. JournalEntry содержит:

·       открытое автореализуемое свойство типа string с названием коллекции, в которой произошло событие;

·       открытое автореализуемое свойство типа string с информацией о типе изменений в коллекции;

·       открытое автореализуемое свойство типа string c данными объекта, с которым связаны изменения в коллекции;

·       конструктор для инициализации полей класса;

·       перегруженную версию метода string ToString().

·       всех элементах массива.

 

12.  Написать демонстрационную программу, в которой:

·        создать две коллекции MyNewCollection.

·       Создать два объекта типа Journal, один объект Journal подписать на события CollectionCountChanged и CollectionReferenceChanged из первой коллекции, другой объект Journal подписать на события CollectionReferenceChanged из обеих коллекций.

13.  Внести изменения в коллекции MyNewCollection

·       добавить элементы в коллекции;

·       удалить некоторые элементы из коллекций;

·       присвоить некоторым элементам коллекций новые значения.

14.  Вывести данные обоих объектов Journal.
 
